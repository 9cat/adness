<div class="panel panel-default">
  <div class="panel-body cardBody">
    <div class="row">
      <span class="auctionCardLabel">
        <% if(auction.open) { %>
          <span class="label label-success">Open</span>
        <% } else { %>
          <% if (auctionStart > new Date().getTime()) { %>
            <span class="label label-primary">Upcoming</span>
          <% } else if (auctionEnd < new Date().getTime()) { %>
            <span class="label label-default">Past</span>
          <% } else { %>
            <span class="label label-danger">Closed</span>
          <% } %>
        <% } %>
      </span>
      <span class="cardHeader">
        Auction:
        <a href="<%= browsePrefix %>/auctions/<%=auction._id%>">
          <%= auction._id %>
        </a>
      </span>
    </div>
    <div class="row">
      <br />
      <strong>Auction Start Date/Time:</strong>
      <span><%= auction.start %></span>
      <br />
      <strong>Auction End Date/Time:</strong>
      <span><%= auction.end %></span><em>(within ~ 30 minutes)</em>
      <br /><br />
      <strong>Ads Start Date/Time:</strong>
      <span><%= auction.adsStart %></span>
      <br />
      <strong>Ads End Date/Time:</strong>
      <span><%= auction.adsEnd %></span>
      <br />
      <% if (auction.description) { %>
        <br />
        <strong>Auction Description:</strong>
        <br />
        <%= auction.description %>
      <% } %>
    </div>

    <div class="row">
      <% auction.regions.forEach(function(region) { %>
        <hr />
        <strong><%= region.name %> Winning Bids</strong>
        <br />

        <% for(var i=0; i < region.primarySlots.length; i++) { %>
          <div class="slot slot_text">
            <div class="row">
              <div class="col-sm-3">Ad Slot #<%= i+1 %></div>
              <div class="col-sm-6">
                Bidder: 
                <a href="<%= browsePrefix %>/users/<%= auction.bidPerSlot[i].user.userId %>">
                  <%= region.primarySlots[i].user.username %>
                </a>
              </div>
              <div class="col-sm-3"><%= region.primarySlots[i].price %> BTC</div>
            </div>
          </div>
        <% } %>

        <% if (region.secondarySlots.length > 0) { %>
          <br>
          <b>Potential Auction Winners</b>
          <br>
          <em>
            These bids are the next in line to be chosen if any of the above bidders decide to cancel or cannot make payment. Bids are sorted by price.
          </em>
          <br>

          <% for(var i=0; i < region.secondarySlots.length; i++) { %>
            <div class="slot slot_text">
              <div class="row">
                <div class="col-sm-3">Ad Slot</div>
                <div class="col-sm-6">
                  Bidder: 
                  <a href="<%= browsePrefix %>/users/<%= auction.secondarySlots[i].user.userId %>">
                    <%= region.secondarySlots[i].user.username %>
                  </a>
                </div>
                <div class="col-sm-3"><%= region.secondarySlots[i].price %> BTC</div>
              </div>
            </div>
          <% } %>
        <% } %>

        <% if (region.primarySlots.length === 0) { %>
          <div class="slot slot_text">
            No Current Winners
          </div>
        <% } %>
      <% }) %>
    </div>
  </div>
</div>
